## code: language=bash
## bash completion for user specific vhost* configuration tools
##
## USERAPACHEDIR must be set in .bashrc, i.e.
## USERAPACHEDIR=$HOME/.apache2

_vhost_allcomp() {
  CONFS=$(ls $USERAPACHEDIR/$1 2>/dev/null)
  echo ${CONFS//.conf/}
}

_vhost_sites() {
  COMPREPLY=( $( compgen -W '$( _vhost_allcomp $1 )' -- $cur  ) )
}

_vhostenable() {
  COMPREPLY=()
  local cur=${COMP_WORDS[COMP_CWORD]}
  _vhost_sites sites-available
}
complete -F _vhostenable vhostenable

_vhostdisable() {
  COMPREPLY=()
  local cur=${COMP_WORDS[COMP_CWORD]}
  _vhost_sites sites-enabled
}
complete -F _vhostdisable vhostdisable
